{%- if section.blocks.size > 0 -%}
  {%- render 'section-spacing-collapsing' -%}

  <style>
    #shopify-section-{{ section.id }} {
      --multi-column-grid: {% if section.settings.stack_on_mobile %}none{% else %}auto / auto-flow 73vw{% endif %};
      --multi-column-list-gap: {% if section.settings.gap == 'small' %}var(--grid-gutter){% elsif section.settings.gap == 'medium' %}var(--spacing-12){% elsif section.settings.gap == 'large' %}var(--spacing-20){% else %}var(--spacing-28){% endif %};
    }




.custom_timeline {
    padding: 30px 0;
}
.custom_timeline .section-stack {
    max-width: 1201px;
    margin: 0 auto;
}
  @media screen and (min-width: 990px){

.custom_timeline .multi-column {
    gap: 67px;
}

{%- for block in section.blocks -%}
  #block-{{ section.id }}-{{ block.id }} .image_cover_main {
          position: relative;
}
  #block-{{ section.id }}-{{ block.id }} .blink_dots {
	 display: flex;
	 justify-content: center;
	 align-items: center;
	 width: 12px;
	 height: 12px;
	 background-color: #f2c315;
	 border-radius: 50%;
	 position: relative;
    transform: translateY(-4px);
    margin-left: -3px;
}
#block-{{ section.id }}-{{ block.id }}:first-child .blink_dots_main.dots_position_top .blink_dots {
    width: 30px;
    height: 30px;
    left: -10px;
    bottom: -25px;
}
#block-{{ section.id }}-{{ block.id }}:last-child .blink_dots_main.dots_position_left .blink_dots {
    width: 30px;
    height: 30px;
    left: 27px;
    bottom: 9px;
    background-color: transparent;
    background-image: url(https://cdn.shopify.com/s/files/1/0609/9481/4140/files/arrow_right.svg?v=1730986371);
    background-size: 30px;
    background-repeat: no-repeat;
    background-position: right;
    z-index: 9;
}

  
  #block-{{ section.id }}-{{ block.id }} .blink_dots_dots_position_top .blink_dots {
    margin-top: -3px;
}
  #block-{{ section.id }}-{{ block.id }} .blink_dots_dots_position_right {
	 justify-content: flex-end;
      display: flex;
}
  #block-{{ section.id }}-{{ block.id }} .blink_dots_dots_position_left {
	 justify-content: flex-start;
      display: flex;
}
    #block-{{ section.id }}-{{ block.id }} .blink_dots_dots_position_top {
	 justify-content: flex-start;
      display: flex;
      width: 12px !important;
}
   #block-{{ section.id }}-{{ block.id }} .blink_dots_dots_position_bottom {
	 justify-content: flex-start;
      display: flex;
      width: 12px !important;
      flex-direction: column-reverse;
}
  #block-{{ section.id }}-{{ block.id }} .blink_dots_dots_position_right2 {
	 justify-content: flex-end;
      display: flex;
}
  #block-{{ section.id }}-{{ block.id }} .blink_dots_dots_position_left2 {
	 justify-content: flex-start;
      display: flex;
}
    #block-{{ section.id }}-{{ block.id }} .blink_dots_dots_position_top2 {
	 justify-content: flex-start;
      display: flex;
      width: 12px !important;
}
    #block-{{ section.id }}-{{ block.id }} .blink_dots_dots_position_bottom2 {
	 justify-content: flex-start;
      display: flex;
      width: 12px !important;
}
    
 #block-{{ section.id }}-{{ block.id }} .blink_dots_main {
    background-image: radial-gradient(circle at 0px 0px, #f2c315  0px, transparent 0), radial-gradient(circle at 2px 2px, #f2c315  2.5px, transparent 0), radial-gradient(circle at 2px 2px, #f2c315  2px, transparent 0), radial-gradient(circle at 2px 2px, #f2c315  2px, transparent 0);
    background-repeat: repeat-x, repeat-x, repeat-y, repeat-y;
    background-size: 7px 5px, 7px 5px, 5px 7px, 5px 7px;
    animation: marching-ants 1000000s infinite linear;
    content: "";
    position: absolute;
    height: 4px;
    top: {{ block.settings.horizontal_position_line }}%;
    transition: all 0.4s ease;
    transform: rotate({{ block.settings.line_rotete }}deg);
}

 #block-{{ section.id }}-{{ block.id }} .blink_dots_main.dots_position_left {
    top: {{ block.settings.horizontal_position_line }}%;
    right: 50%;
    width: calc({{ block.settings.vertical_position_line }}% + 67px);
    transform-origin: right center;
}
 #block-{{ section.id }}-{{ block.id }} .blink_dots_main.dots_position_right {
    top: {{ block.settings.horizontal_position_line }}%;
    left: 110%;
    width: calc({{ block.settings.vertical_position_line }}% + 67px);
    transform-origin: left center;
    display: flex;
    justify-content: flex-end;
   background-size: 0px 0px, 7px 4px, 0px 0px, 0px 0px;
}

 #block-{{ section.id }}-{{ block.id }} .blink_dots_main.dots_position_top {
    width: 4px;
    height: {{ block.settings.vertical_position_line }}%;
    transform-origin: bottom center;
    top: auto;
    left: {{ block.settings.horizontal_position_line }}%;
    bottom: 100%;
    background-image: radial-gradient(circle at 0px 0px, #f2c315  0px, transparent 0), radial-gradient(circle at 0px 0px, #f2c315  0px, transparent 0), radial-gradient(circle at 2px 2px, #f2c315  2px, transparent 0), radial-gradient(circle at 0px 0px, #f2c315  0px, transparent 0);
}
  
/* Second line css */
  
 #block-{{ section.id }}-{{ block.id }} .blink_dots_main.dots_position_left2 {
    top: {{ block.settings.horizontal_position_line2 }}%;
    right: 50%;
    width: calc({{ block.settings.vertical_position_line2 }}% + 67px);
    transform-origin: right center;
     transform: rotate({{ block.settings.line_rotete2 }}deg);
}
 #block-{{ section.id }}-{{ block.id }} .blink_dots_main.dots_position_right2 {
    top: {{ block.settings.horizontal_position_line2 }}%;
    left: 50%;
    width: calc({{ block.settings.vertical_position_line2 }}% + 67px);
    transform-origin: left center;
    display: flex;
    /* justify-content: ; */
     transform: rotate({{ block.settings.line_rotete2 }}deg);
}

 #block-{{ section.id }}-{{ block.id }} .blink_dots_main.dots_position_top2 {
    width: 4px;
    height: {{ block.settings.vertical_position_line2 }}%;
    transform-origin: bottom center;
    top: auto;
    left: {{ block.settings.horizontal_position_line2 }}%;
    bottom: 100%;
    transform: rotate({{ block.settings.line_rotete2 }}deg);
    background-image: radial-gradient(circle at 0px 0px, #f2c315  0px, transparent 0), radial-gradient(circle at 0px 0px, #f2c315  0px, transparent 0), radial-gradient(circle at 2px 2px, #f2c315  2px, transparent 0), radial-gradient(circle at 0px 0px, #f2c315  0px, transparent 0);
}

{%- endfor -%}



    
  </style>

  <div {% render 'section-properties' %}>
    <div class="section-stack">
      {%- render 'section-header', subheading: section.settings.subheading, heading: section.settings.title, content: section.settings.content, text_alignment: section.settings.text_alignment -%}

      <div class="multi-column scroll-area bleed md:unbleed {% if section.settings.stack_on_mobile %} custom_timeline_slider {% endif %}">
        {%- for block in section.blocks -%}
          {%- case block.type -%}
            {%- when 'item' -%}
              <div id="block-{{ section.id }}-{{ block.id }}" class="multi-column__item justify-{{ section.settings.text_alignment }} snap-start {% if section.settings.enable_column_padding %} enable_column_padding{% endif %}" style="--multi-column-item-column-count: span {{ 12.0 | divided_by: block.settings.column_size | round }}; background-color: {{ section.settings.column_background }}" {{ block.shopify_attributes }}>
                <div class="image_cover_main">
                <div class="image_cover">
                {%- if block.settings.video != blank -%}
                  <video-media autoplay style="--aspect-ratio: {{ block.settings.video.aspect_ratio }}">
                    {{ block.settings.video | video_tag: playsinline: true, muted: true, loop: true, preload: 'metadata', class: 'rounded' }}
                  </video-media>
                {%- elsif block.settings.image != blank -%}
                  {%- capture sizes -%}(max-width: 699px) calc(73vw - 40px), (max-width: 999px) calc(38vw - 64px), calc(min({{ settings.page_width }}px, 100vw) / {{ block.settings.column_size }}){%- endcapture -%}
                  {{- block.settings.image | image_url: width: block.settings.image.width | image_tag: loading: 'lazy', sizes: sizes, widths: '300,400,500,600,800,1000,1200,1400,1600,1800', class: 'rounded' -}}
                {%- endif -%}

                <div class="blink_dots_main {{ block.settings.dots_position }} blink_dots_{{ block.settings.dot_possition }}"><div class="blink_dots"></div></div>
                 {% if block.settings.enable_line2 %}
                  <div class="blink_dots_main {{ block.settings.dots_position2 }}  blink_dots_{{ block.settings.dot_possition2 }} line_rotete2"><div class="blink_dots"></div></div>
                {% endif %}
                </div>
                </div>
                
                {%- if block.settings.title != blank or block.settings.content != blank or block.settings.link_text != blank -%}
                  <div class="v-stack gap-4 text-{{ section.settings.text_alignment }}">

                    {%- if block.settings.title != blank -%}
                      <p class="heading heading_height {{ block.settings.heading_tag }}" data-equal>{{ block.settings.title | escape }}</p>
                    {%- endif -%}
                    
                    {%- if block.settings.subtitle != blank -%}
                      <p class="subheading {{ block.settings.subtitle1 }}">{{ block.settings.subtitle | escape }}</p>
                    {%- endif -%}

                    {%- if block.settings.content != blank or block.settings.link_text != blank -%}
                      <div class="item">
                        <div class="prose content">
                        {{- block.settings.content -}}

                        {%- if block.settings.link_text != blank -%}
                          <div>
                            {%- if block.settings.link_style == 'link' -%}
                              <a href="{{ block.settings.link_url }}" class="link">{{ block.settings.link_text | escape }}</a>
                            {%- else -%}
                              {%- render 'button', href: block.settings.link_url, content: block.settings.link_text, size: 'lg' -%}
                            {%- endif -%}
                          </div>
                        {%- endif -%}
                        </div>
                        <button class="read-more">
                          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="icon-md text-token-text-primary"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 21C11.7348 21 11.4804 20.8946 11.2929 20.7071L4.29289 13.7071C3.90237 13.3166 3.90237 12.6834 4.29289 12.2929C4.68342 11.9024 5.31658 11.9024 5.70711 12.2929L11 17.5858V4C11 3.44772 11.4477 3 12 3C12.5523 3 13 3.44772 13 4V17.5858L18.2929 12.2929C18.6834 11.9024 19.3166 11.9024 19.7071 12.2929C20.0976 12.6834 20.0976 13.3166 19.7071 13.7071L12.7071 20.7071C12.5196 20.8946 12.2652 21 12 21Z" fill="currentColor"></path></svg>
                        </button>
                      </div>
                    {%- endif -%}
                  </div>
                {%- endif -%}
              </div>

            {%- when 'spacer' -%}
              <div class="multi-column__item hidden md:block" style="--multi-column-item-column-count: span {{ 12.0 | divided_by: block.settings.column_size | round }}" {{ block.shopify_attributes }}></div>
          {%- endcase -%}
        {%- endfor -%}
      </div>
    </div>
  </div>
{%- endif -%}


{% schema %}
{
  "name": "Custom timeline",
  "class": "shopify-section--multi-column custom_timeline",
  "tag": "section",
  "disabled_on": {
    "templates": ["password"],
    "groups": ["header", "custom.overlay"]
  },
  "settings": [
    {
      "type": "checkbox",
      "id": "full_width",
      "label": "Full width",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "stack_on_mobile",
      "label": "Slide on mobile",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "enable_column_padding",
      "label": "Enable column padding",
      "default": false
    },
    {
      "type": "color",
      "id": "column_background",
      "label": "Column Background"
    },
        {
      "type": "select",
      "id": "header_text",
      "label": "Header text alignment",
      "options": [
        {
          "value": "start",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        }
      ],
      "default": "start"
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text alignment",
      "options": [
        {
          "value": "start",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "end",
          "label": "Right"
        }
      ],
      "default": "start"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "About"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Featured content"
    },
    {
      "type": "richtext",
      "id": "content",
      "label": "Content",
      "default": "<p>Organize content into multiple columns to share useful information to your customers about your products, values...</p>"
    },
    {
      "type": "header",
      "content": "Colors",
      "info": "Gradient replaces solid colors when set."
    },
    {
      "type": "color",
      "id": "background",
      "label": "Background"
    },
    {
      "type": "color_background",
      "id": "background_gradient",
      "label": "Background gradient"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text"
    }
  ],
  "blocks": [
    {
      "type": "item",
      "name": "Item",
      "settings": [

        {
          "type": "header",
          "content": "First Line position"
        },
        {
          "type": "select",
          "id": "dots_position",
          "label": "Line/Dots position",
          "default": "dots_position_right",
          "options": [
            {
              "value": "dots_position_left",
              "label": "Left"
            },
            {
              "value": "dots_position_right",
              "label": "Right"
            },
            {
              "value": "dots_position_top",
              "label": "Top"
            }
          ]
        },
        {
          "type": "range",
          "id": "horizontal_position_line",
          "min": 0,
          "max": 100,
          "step": 1,
          "unit": "%",
          "label": "Vertical line position",
          "default": 30
        },
        {
          "type": "range",
          "id": "vertical_position_line",
          "min": 0,
          "max": 100,
          "step": 1,
          "unit": "%",
          "label": "Line width/height",
          "default": 30
        },
         {
          "type": "range",
          "id": "line_rotete",
          "min": -90,
          "max": 90,
          "step": 2,
          "unit": "deg",
          "label": "Line rotate",
          "default": 0
        },
       {
          "type": "select",
          "id": "dot_possition",
          "label": "Dots position",
          "default": "dots_position_right",
          "options": [
            {
              "value": "dots_position_left",
              "label": "Left"
            },
            {
              "value": "dots_position_right",
              "label": "Right"
            },
            {
              "value": "dots_position_top",
              "label": "Top"
            },
            {
              "value": "dots_position_bottom",
              "label": "Bottom"
            }
          ]
        },
        {
          "type": "header",
          "content": "Second Line position"
        },
        {
          "type": "checkbox",
          "id": "enable_line2",
          "label": "Enable line",
          "default": false
        },
        {
          "type": "select",
          "id": "dots_position2",
          "label": "Line/Dots position",
          "default": "dots_position_right2",
          "options": [
            {
              "value": "dots_position_left2",
              "label": "Left"
            },
            {
              "value": "dots_position_right2",
              "label": "Right"
            },
            {
              "value": "dots_position_top2",
              "label": "Top"
            }
          ]
        },
        {
          "type": "range",
          "id": "horizontal_position_line2",
          "min": -50,
          "max": 50,
          "step": 1,
          "unit": "%",
          "label": "Vertical line position",
          "default": 30
        },
        {
          "type": "range",
          "id": "vertical_position_line2",
          "min": 0,
          "max": 100,
          "step": 1,
          "unit": "%",
          "label": "Line width/height",
          "default": 30
        },
         {
          "type": "range",
          "id": "line_rotete2",
          "min": -90,
          "max": 90,
          "step": 2,
          "unit": "deg",
          "label": "Line rotate",
          "default": 0
        },

        {
          "type": "select",
          "id": "dot_possition2",
          "label": "Dots position 2",
          "default": "dots_position_right2",
          "options": [
            {
              "value": "dots_position_left2",
              "label": "Left"
            },
            {
              "value": "dots_position_right2",
              "label": "Right"
            },
            {
              "value": "dots_position_top2",
              "label": "Top"
            },
            {
              "value": "dots_position_bottom",
              "label": "Bottom"
            }
          ]
        },
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image",
          "info": "1400 x 1400px .jpg recommended"
        },
        {
          "type": "video",
          "id": "video",
          "label": "Video",
          "info": "Video are muted automatically and will autoplay."
        },
        {
          "type": "select",
          "id": "column_size",
          "label": "Desktop item size",
          "options": [
            {
              "value": "4",
              "label": "25%"
            },
            {
              "value": "3",
              "label": "33%"
            },
            {
              "value": "2",
              "label": "50%"
            },
            {
              "value": "1.5",
              "label": "66%"
            }
          ],
          "default": "3"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Heading",
          "default": "Column title"
        },
        {
          "type": "select",
          "id": "heading_tag",
          "label": "Heading style",
          "options": [
            {
              "value": "h1",
              "label": "H1"
            },
            {
              "value": "h2",
              "label": "H2"
            },
            {
              "value": "h3",
              "label": "H3"
            },
            {
              "value": "h4",
              "label": "H4"
            },
            {
              "value": "h5",
              "label": "H5"
            },
            {
              "value": "h6",
              "label": "H6"
            }
          ],
          "default": "h4"
        },
        {
          "type": "text",
          "id": "subtitle",
          "label": "Sub heading",
          "default": "Column title"
        },
        {
          "type": "select",
          "id": "subtitle1",
          "label": "Heading style",
          "options": [
            {
              "value": "h1",
              "label": "H1"
            },
            {
              "value": "h2",
              "label": "H2"
            },
            {
              "value": "h3",
              "label": "H3"
            },
            {
              "value": "h4",
              "label": "H4"
            },
            {
              "value": "h5",
              "label": "H5"
            },
            {
              "value": "h6",
              "label": "H6"
            }
          ],
          "default": "h4"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Content",
          "default": "<p>Pair text with an image to focus on your chosen product, collection, or blog post. Add details on availability, style, or even provide a review.</p>"
        },
        {
          "type": "url",
          "id": "link_url",
          "label": "Link URL"
        },
        {
          "type": "text",
          "id": "link_text",
          "label": "Link text"
        },
        {
          "type": "select",
          "id": "link_style",
          "label": "Link style",
          "options": [
            {
              "value": "link",
              "label": "Link"
            },
            {
              "value": "button",
              "label": "Button"
            }
          ],
          "default": "link"
        }
      ]
    },
    {
      "type": "spacer",
      "name": "Spacer",
      "settings": [
        {
          "type": "paragraph",
          "content": "Add extra space between columns. Ignored on mobile and tablets."
        },
        {
          "type": "select",
          "id": "column_size",
          "label": "Desktop item size",
          "options": [
            {
              "value": "12",
              "label": "8%"
            },
            {
              "value": "6",
              "label": "16%"
            },
            {
              "value": "4",
              "label": "25%"
            },
            {
              "value": "3",
              "label": "33%"
            }
          ],
          "default": "12"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom timeline",
      "blocks": [
        {
          "type": "item",
          "settings": {}
        },
        {
          "type": "item",
          "settings": {}
        },
        {
          "type": "item",
          "settings": {}
        }
      ]
    }
  ]
}
{% endschema %}